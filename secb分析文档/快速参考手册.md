# SWE-agent å·¥ä½œæµå¿«é€Ÿå‚è€ƒ

## ğŸš€ ä¸€åˆ†é’Ÿç†è§£å·¥ä½œæµ

```
ç”¨æˆ·å‘½ä»¤
    â†“
./run_secb.sh poc -m deepseek -l :5
    â†“
[è„šæœ¬å±‚] å‚æ•°è§£æ + æ¨¡å‹æ˜ å°„
    â†“
sweagent run-batch --config secb_poc.yaml ...
    â†“
[è°ƒåº¦å±‚] åŠ è½½ 5 ä¸ªå®ä¾‹ â†’ åˆ†é…ç»™ worker
    â†“
[æ‰§è¡Œå±‚] å¯¹æ¯ä¸ªå®ä¾‹ï¼š
    1. åˆ›å»º Docker å®¹å™¨
    2. å…‹éš†ä»£ç åº“
    3. Agent å¾ªç¯ï¼ˆæœ€å¤š 75 æ¬¡ï¼‰ï¼š
       LLM ç”ŸæˆåŠ¨ä½œ â†’ æ‰§è¡Œå·¥å…· â†’ è·å–è§‚å¯Ÿ â†’ æ›´æ–°ä¸Šä¸‹æ–‡
    4. æäº¤ PoC/Patch
    5. ä¿å­˜è½¨è¿¹æ–‡ä»¶
    â†“
[æ±‡æ€»å±‚] åˆå¹¶æ‰€æœ‰ç»“æœ â†’ predictions.jsonl
```

## ğŸ“¦ æ ¸å¿ƒï¿½ï¿½ä»¶

| å±‚æ¬¡ | ç»„ä»¶ | æ–‡ä»¶/æ¨¡å— | èŒè´£ |
|------|------|-----------|------|
| **è„šæœ¬å±‚** | run_secb.sh | `run_secb.sh` | å‘½ä»¤è¡Œæ¥å£ |
| **é…ç½®å±‚** | YAML é…ç½® | `config/secb_*.yaml` | å®šä¹‰ Agent è¡Œä¸º |
| **è°ƒåº¦å±‚** | RunBatch | `sweagent/run/run_batch.py` | æ‰¹é‡å¤„ç†è°ƒåº¦ |
| **Agent å±‚** | Agent | `sweagent/agent/agents.py` | LLM äº¤äº’é€»è¾‘ |
| **å·¥å…·å±‚** | Tools | `tools/*/bin/*` | æ–‡ä»¶æ“ä½œã€æœç´¢ã€ç¼–è¾‘ |
| **ç¯å¢ƒå±‚** | SWE-ReX | Docker å®¹å™¨ | éš”ç¦»æ‰§è¡Œç¯å¢ƒ |

## ğŸ”„ ä¸¤ç§æ¨¡å¼å¯¹æ¯”

### PoC æ¨¡å¼ï¼ˆç”Ÿæˆæ¼æ´åˆ©ç”¨ä»£ç ï¼‰

```
ç›®æ ‡ï¼šåˆ›å»ºè§¦å‘æ¼æ´çš„ PoC æ–‡ä»¶

å·¥ä½œæµï¼š
1. æ¢ç´¢ä»£ç åº“
2. åˆ†ææ¼æ´
3. å¼€å‘ PoCï¼ˆPython è„šæœ¬ï¼‰
4. éªŒè¯ï¼ˆsecb reproï¼‰
5. ä¼˜åŒ–ï¼ˆé‡å¤ 2-4ï¼‰

è¾“å‡ºï¼š/testcase/*.py â†’ poc.tar.gz.base64

é…ç½®ï¼šconfig/secb_poc.yaml
æäº¤å·¥å…·ï¼štools/submit_poc
```

### Patch æ¨¡å¼ï¼ˆç”Ÿæˆä¿®å¤è¡¥ä¸ï¼‰

```
ç›®æ ‡ï¼šç”Ÿæˆä¿®å¤æ¼æ´çš„ä»£ç è¡¥ä¸

å·¥ä½œæµï¼š
1. æ¢ç´¢ä»£ç åº“
2. æå‡ºä¿®å¤æ–¹æ¡ˆï¼ˆ2-3 ç§ï¼‰
3. å®ç°æœ€å°åŒ–ä¿®æ”¹
4. éªŒè¯ï¼ˆsecb build + reproï¼‰
5. æœ€ç»ˆå®¡æŸ¥

è¾“å‡ºï¼šgit diff â†’ model.patch

é…ç½®ï¼šconfig/secb_patch.yaml
æäº¤å·¥å…·ï¼štools/submit_patch
```

## ğŸ› ï¸ å¸¸ç”¨å·¥å…·

### æ–‡ä»¶å¯¼èˆªï¼ˆtools/defaultsï¼‰
```bash
open main.c          # æ‰“å¼€æ–‡ä»¶
goto 100             # è·³è½¬åˆ°ç¬¬ 100 è¡Œ
scroll_down          # å‘ä¸‹æ»šåŠ¨
create test.py       # åˆ›å»ºæ–°æ–‡ä»¶
```

### æœç´¢ï¼ˆtools/searchï¼‰
```bash
find_file "*.c"              # æŸ¥æ‰¾ C æ–‡ä»¶
search_dir "CVE" ./src       # åœ¨ src ä¸­æœç´¢ CVE
search_file "malloc" main.c  # åœ¨ main.c ä¸­æœç´¢ malloc
```

### ç¼–è¾‘ï¼ˆtools/changeï¼‰
```bash
edit main.c:10-15
// æ–°ä»£ç 
<<<<<<< DIVIDER >>>>>>>
```

### æäº¤
```bash
submit              # PoC æ¨¡å¼
submit /workspace   # Patch æ¨¡å¼
```

## ğŸ“Š å…³é”®å‚æ•°é€ŸæŸ¥

### å‘½ä»¤è¡Œå‚æ•°

```bash
./run_secb.sh <mode> [options]

mode:
  poc      ç”Ÿæˆ PoC
  patch    ç”Ÿæˆè¡¥ä¸

å¸¸ç”¨é€‰é¡¹:
  -m deepseek      ä½¿ç”¨ DeepSeek æ¨¡å‹
  -l :10           å¤„ç†å‰ 10 ä¸ªå®ä¾‹
  -w 2             ä½¿ç”¨ 2 ä¸ªå¹¶è¡Œ worker
  -c 2.0           æˆæœ¬é™åˆ¶ $2.0
  -n 100           æœ€å¤šè°ƒç”¨ 100 æ¬¡
```

### æ¨¡å‹é€‰æ‹©

| ç®€ç§° | å®Œæ•´åç§° | æ¨èåœºæ™¯ |
|------|----------|----------|
| `deepseek` | openai/deepseek-chat | ä½æˆæœ¬ã€é«˜æ€§ä»·æ¯” |
| `sonnet` | claude-3-7-sonnet | é«˜è´¨é‡ã€SoTA æ€§èƒ½ |
| `4o` | gpt-4o | å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ |
| `gemini-pro` | gemini-2.5-pro | Google ç”Ÿæ€ |

### åˆ‡ç‰‡è¯­æ³•

```bash
-l :10      # å‰ 10 ä¸ªï¼ˆ0-9ï¼‰
-l 10:20    # ç¬¬ 10-19 ä¸ª
-l 5:6      # å•ä¸ªå®ä¾‹ï¼ˆç¬¬ 5 ä¸ªï¼‰
-l :80      # å‰ 80 ä¸ªï¼ˆé»˜è®¤ï¼‰
```

## ğŸ¯ å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¿«é€Ÿæµ‹è¯•

```bash
# å•ä¸ªå®ä¾‹ + DeepSeek
./run_secb.sh poc -m deepseek -l 0:1 -c 0.5

# æŸ¥çœ‹è½¨ï¿½ï¿½ï¿½
sweagent inspect trajectories/*/instance_0.traj
```

### åœºæ™¯ 2ï¼šå°è§„æ¨¡è¯„ä¼°

```bash
# å‰ 10 ä¸ªå®ä¾‹ + å¹¶è¡Œå¤„ç†
./run_secb.sh poc -m deepseek -l :10 -w 2 -c 1.5
```

### åœºæ™¯ 3ï¼šå®Œæ•´è¯„ä¼°

```bash
# æ‰€æœ‰å®ä¾‹ + é«˜å¹¶è¡Œ
./run_secb.sh patch -m sonnet -l :80 -w 4 -c 3.0 -n 100
```

### åœºæ™¯ 4ï¼šæˆæœ¬ä¼˜åŒ–

```bash
# ä½æˆæœ¬è®¾ç½®
./run_secb.sh poc -m deepseek -c 0.3 -n 30 -l :5
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
# è¿è¡Œæ—¶æ—¥å¿—åœ¨ output_dir/
tail -f trajectories/*/instance_0.log
```

### 2. æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
docker ps                    # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker logs <container_id>   # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
```

### 3. æ£€æŸ¥æäº¤å†…å®¹

```bash
# PoC æ¨¡å¼
base64 -d poc.tar.gz.base64 > poc.tar.gz
tar -xzf poc.tar.gz

# Patch æ¨¡å¼
cat model.patch
```

### 4. é‡æ”¾è½¨è¿¹

```bash
sweagent run-replay --trajectory trajectories/*/instance_0.traj
```

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… DO

1. **ä»å°è§„æ¨¡å¼€å§‹**ï¼šå…ˆæµ‹è¯• 1-5 ä¸ªå®ä¾‹
2. **è®¾ç½®åˆç†é™åˆ¶**ï¼šé¿å…è¿‡åº¦æ¶ˆè´¹ï¼ˆ-c å’Œ -nï¼‰
3. **ä½¿ç”¨å¹¶è¡Œå¤„ç†**ï¼šå¤šå®ä¾‹æ—¶ç”¨ -w å‚æ•°
4. **å®šæœŸæ£€æŸ¥è¾“å‡º**ï¼šç›‘æ§ trajectories/ ç›®å½•
5. **ä¿å­˜é…ç½®**ï¼šè®°å½•æˆåŠŸçš„å‚æ•°ç»„åˆ

### âŒ DON'T

1. **ä¸è¦ä¸€æ¬¡æ€§è¿è¡Œæ‰€æœ‰å®ä¾‹**ï¼ˆé™¤éå·²å……åˆ†æµ‹è¯•ï¼‰
2. **ä¸è¦å¿½ç•¥æˆæœ¬é™åˆ¶**ï¼ˆå¯èƒ½äº§ç”Ÿé«˜é¢è´¹ç”¨ï¼‰
3. **ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæ— ç›‘æ§è¿è¡Œ**
4. **ä¸è¦å¿˜è®°å¤‡ä»½é‡è¦ç»“æœ**
5. **ä¸è¦æ··ç”¨ä¸åŒç‰ˆæœ¬çš„é…ç½®**

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æé«˜æˆåŠŸç‡
```bash
-n 100      # å¢åŠ å°è¯•æ¬¡æ•°
-c 3.0      # æé«˜æˆæœ¬é™åˆ¶
-m sonnet   # ä½¿ç”¨æ›´å¼ºæ¨¡å‹
```

### æé«˜é€Ÿåº¦
```bash
-w 4        # å¢åŠ å¹¶è¡Œåº¦
-m 4o       # ä½¿ç”¨æ›´å¿«æ¨¡å‹
-l :10      # å‡å°‘å®ä¾‹æ•°
```

### é™ä½æˆæœ¬
```bash
-m deepseek # ä½¿ç”¨ä½æˆæœ¬æ¨¡å‹
-c 0.5      # é™ä½æˆæœ¬é™åˆ¶
-n 30       # å‡å°‘å°è¯•æ¬¡æ•°
```

## ğŸ†˜ å¸¸è§é”™è¯¯

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `ModuleNotFoundError: docker` | æœªå®‰è£… docker æ¨¡å— | `python -m pip install docker` |
| `Cannot connect to Docker daemon` | Docker æœªè¿è¡Œ | `sudo systemctl start docker` |
| `Authentication failed` | API key æ— æ•ˆ | æ£€æŸ¥ `.env` æ–‡ä»¶ |
| `No instances found` | æ•°æ®é›†åŠ è½½å¤±è´¥ | æ£€æŸ¥ç½‘ç»œå’Œåˆ‡ç‰‡å‚æ•° |
| `Submission timeout` | æ‰§è¡Œè¶…æ—¶ | å¢åŠ  `execution_timeout` |

## ğŸ“š å»¶ä¼¸é˜…è¯»

- ğŸ“– **å®Œæ•´åˆ†æ**ï¼š`å®Œæ•´å·¥ä½œæµåˆ†æ.md`ï¼ˆæ·±å…¥æŠ€æœ¯ç»†èŠ‚ï¼‰
- ğŸ”§ **é…ç½®è¯´æ˜**ï¼š`DeepSeeké…ç½®è¯´æ˜.md`ï¼ˆAPI é…ç½®ï¼‰
- ğŸ“ **æ‰§è¡Œå‘½ä»¤**ï¼š`æ‰§è¡Œå‘½ä»¤.md`ï¼ˆå‘½ä»¤ç¤ºä¾‹ï¼‰
- ğŸŒ **å®˜æ–¹æ–‡æ¡£**ï¼šhttps://swe-agent.com/latest/

## ğŸ“ å­¦ä¹ è·¯å¾„

```
æ–°æ‰‹ï¼š
  1. é˜…è¯»æœ¬æ–‡æ¡£
  2. è¿è¡Œå•ä¸ªå®ä¾‹æµ‹è¯•
  3. æŸ¥çœ‹è½¨è¿¹æ–‡ä»¶
  â†“
è¿›é˜¶ï¼š
  4. é˜…è¯»å®Œæ•´å·¥ä½œæµåˆ†æ
  5. è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
  6. å®ç°è‡ªå®šä¹‰å·¥å…·
  â†“
ä¸“å®¶ï¼š
  7. ä¼˜åŒ– Prompt æ¨¡æ¿
  8. æ‰©å±•å·¥å…·ç³»ç»Ÿ
  9. é›†æˆæ–°æ¨¡å‹
```
